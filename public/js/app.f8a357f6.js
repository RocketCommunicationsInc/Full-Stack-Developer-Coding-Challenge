(function(t){function e(e){for(var n,o,l=e[0],i=e[1],u=e[2],f=0,m=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);c&&c(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,l=1;l<r.length;l++){var i=r[l];0!==a[i]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var c=i;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},1971:function(t,e,r){"use strict";r("cbfc")},2317:function(t,e,r){},"3c57":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-tertiary-800 dark-theme",attrs:{id:"app"}},[r("router-view")],1)},s=[],o=r("2877"),l={},i=Object(o["a"])(l,a,s,!1,null,null,null),u=i.exports,c=(r("8609"),r("a766"),r("9569"),r("c6f4"),r("2f62")),f=r("1da1"),m=(r("96cf"),r("7338")),d=r.n(m),p=d.a.create({withCredentials:!0,baseURL:"/api"}),h=p,v={authenticated:!1,user:null},b={authenticated:function(t){return t.authenticated},user:function(t){return t.user}},g={SET_AUTHENTICATED:function(t,e){t.authenticated=e},SET_USER:function(t,e){t.user=e}},x={logIn:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,r.next=3,h.get("/csrf-cookie");case 3:return r.next=5,h.post("/login",e);case 5:if(a=r.sent,!a){r.next=10;break}return r.abrupt("return",n("fetchUser"));case 10:console.log(a);case 11:case"end":return r.stop()}}),r)})))()},logOut:function(t){return Object(f["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,h.post("/logout");case 4:r("SET_AUTHENTICATED",!1),r("SET_USER",null),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),r("SET_AUTHENTICATED",!1),r("SET_USER",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},fetchUser:function(t){return Object(f["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.abrupt("return",h.get("/me").then((function(t){r("SET_AUTHENTICATED",!0),r("SET_USER",t.data)})).catch((function(){r("SET_AUTHENTICATED",!1),r("SET_USER",null)})));case 2:case"end":return e.stop()}}),e)})))()}},w={namespaced:!0,state:v,getters:b,mutations:g,actions:x};n["a"].use(c["a"]);var y=new c["a"].Store({state:{},mutations:{},actions:{},modules:{auth:w}}),_=r("8c4f"),C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-tertiary-800 dark-theme h-screen",attrs:{id:"app"}},[r("rux-global-status-bar",{attrs:{appname:"GRM Dashboard",version:"1.0.0 Alpha"}},[r("rux-clock"),r("rux-button",{nativeOn:{click:function(e){return t.logOut(e)}}},[t._v(" Logout ")])],1),r("main",{staticClass:"bg-tertiary-800"},[r("div",{staticClass:"flex flex-col md:flex-row p-4"},[r("div",{staticClass:"w-full md:w-1/3 mr-4 panel"},[r("base-panel",{staticClass:"h-full",attrs:{title:"Alerts"}},[r("panel-alerts")],1)],1),r("div",{staticClass:"w-full md:w-2/3 panel"},[r("base-panel",{staticClass:"h-full",attrs:{title:"Contacts"}},[r("panel-contacts")],1)],1)])])],1)},E=[],O=(r("5319"),r("ac1f"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"overflow-auto"},[t.loading?r("div",{staticClass:"p-12"},[r("base-spinner",{staticClass:"m-auto w-16 h-16"})],1):[t.error?r("div",{staticClass:"p-12 flex justify-center items-center"},[t._v(" "+t._s(t.error)+" "),r("rux-button",{staticClass:"ml-4",nativeOn:{click:function(e){return t.fetchAlerts(e)}}},[t._v(" Retry ")])],1):[r("rux-table",{attrs:{columns:t.columns,data:t.alerts}})]]],2)}),R=[],S=(r("d3b7"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"rux-table"},[r("tr",{staticClass:"relative rux-table__column-head"},t._l(t.columns,(function(e,n){return r("th",{key:n,staticClass:"sticky top-0",class:e.sort?"rux-table__column--sortable":"",on:{click:function(r){r.preventDefault(),e.sort&&t.sortColumn(e)}}},[r("span",{staticClass:"inline-flex items-center"},[t._v(" "+t._s(e.label)+" "),e.sort&&"desc"===t.sort?r("svg",{staticClass:"ml-2 w-4 h-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}})]):t._e(),e.sort&&"asc"===t.sort?r("svg",{staticClass:"ml-2 w-4 h-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"}})]):t._e()])])})),0),t._l(t.sortedData,(function(e,n){return r("tr",{key:n},t._l(t.columns,(function(n){return r("td",{key:n.name,staticClass:"truncate"},["date"===n.format?[t._v(" "+t._s(t.formatDate(e[n.name]))+" ")]:r("div",{staticClass:"capitalize"},[t._v(" "+t._s(e[n.name])+" ")])],2)})),0)}))],2)}),T=[],k=(r("b0c0"),r("b166"));function j(t){return Object(k["a"])(t,"kk:mm:ss")}var B=r("2ef0"),$={name:"RuxTable",props:{columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}}},data:function(){return{sort:null,sortBy:null}},computed:{sortedData:function(){return this.sort?Object(B["orderBy"])(this.data,[this.sortBy],[this.sort]):this.data}},methods:{sortColumn:function(t){this.sort?"asc"===this.sort?(this.sort="desc",this.sortBy=t.name):"desc"===this.sort&&(this.sort=null,this.sortBy=null):(this.sort="asc",this.sortBy=t.name)},formatDate:function(t){return j(t)}}},A=$,P=(r("df67"),Object(o["a"])(A,S,T,!1,null,null,null)),D=P.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{attrs:{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"}},[r("g",{attrs:{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"}},[r("circle",{attrs:{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}}),r("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[r("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}})],1)])])},L=[],I={name:"BaseSpinner"},N=I,M=Object(o["a"])(N,U,L,!1,null,"798e168f",null),z=M.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"rux-button",class:t.outline?"rux-button--outline":"",attrs:{type:t.type}},[t._t("default")],2)},q=[],H={name:"RuxButton",props:{outline:{type:Boolean,default:!1},type:{type:String,default:"submit"}}},V=H,G=Object(o["a"])(V,F,q,!1,null,"c521722a",null),J=G.exports,K={name:"PanelAlerts",components:{RuxButton:J,BaseSpinner:z,RuxTable:D},data:function(){return{error:null,loading:!1,columns:[{name:"errorMessage",label:"Message",sort:!1},{name:"errorCategory",label:"Category",sort:!0},{name:"errorTime",label:"Time",format:"date",sort:!1}],alerts:[]}},created:function(){this.fetchAlerts()},methods:{fetchAlerts:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.error=null,t.loading=!0,h.get("/alerts").then((function(e){t.alerts=e.data.data})).catch((function(){t.error="Unable to fetch Alerts"})).finally((function(){t.loading=!1}));case 3:case"end":return e.stop()}}),e)})))()}}},Q=K,W=Object(o["a"])(Q,O,R,!1,null,"193419d8",null),X=W.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col overflow-hidden"},[t.loading?r("div",{staticClass:"p-12"},[r("base-spinner",{staticClass:"m-auto w-16 h-16"})],1):[t.error?r("div",{staticClass:"p-12 flex justify-center items-center"},[t._v(" "+t._s(t.error)+" "),r("rux-button",{staticClass:"ml-4",nativeOn:{click:function(e){return t.fetchContacts(e)}}},[t._v(" Retry ")])],1):[r("div",{staticClass:"bg-gray-600 pb-8"},[r("ul",{staticClass:"flex items-center justify-between w-1/3 m-auto"},[r("li",{staticClass:"mr-4"},[r("base-badge",{attrs:{label:"Contacts",value:t.totalContacts}})],1),t._l(t.contactsGroupedByState,(function(t,e){return r("li",{key:e,staticClass:"mr-4"},[r("base-badge",{attrs:{label:e,value:t.length}})],1)}))],2)]),r("div",{staticClass:"overflow-auto"},[r("rux-table",{attrs:{columns:t.columns,data:t.contacts}})],1)]]],2)},Z=[],tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex items-center flex-col leading-tight"},[r("div",{staticClass:"text-6xl font-bold"},[t._v(" "+t._s(t.value)+" ")]),r("div",{staticClass:"capitalize"},[t._v(" "+t._s(t.label)+" ")])])},et=[],rt=(r("a9e3"),{name:"BaseBadge",props:{label:{type:String,default:""},value:{type:Number,default:0}}}),nt=rt,at=Object(o["a"])(nt,tt,et,!1,null,"b2766db4",null),st=at.exports,ot={name:"PanelContacts",components:{RuxButton:J,BaseSpinner:z,BaseBadge:st,RuxTable:D},data:function(){return{loading:!0,error:null,contacts:[],columns:[{name:"contactName",label:"Name",sort:!0},{name:"contactStatus",label:" Status"},{name:"contactBeginTimestamp",label:"Begin",format:"date"},{name:"contactEndTimestamp",label:" End",format:"date"}]}},computed:{totalContacts:function(){return this.contacts.length},contactsGroupedByState:function(){return Object(B["groupBy"])(this.contacts,(function(t){return t.contactState}))}},created:function(){this.fetchContacts()},methods:{fetchContacts:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.error=null,t.loading=!0,h.get("/contacts").then((function(e){t.contacts=e.data.data})).catch((function(){t.error="Unable to fetch Contact data"})).finally((function(){t.loading=!1}));case 3:case"end":return e.stop()}}),e)})))()}}},lt=ot,it=Object(o["a"])(lt,Y,Z,!1,null,"08ceef7f",null),ut=it.exports,ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"bg-tertiary-600 p-4"},[r("div",{staticClass:"text-2xl"},[t._v(" "+t._s(t.title)+" ")])]),r("div",{staticClass:"bg-tertiary-500 p4 flex flex-col overflow-hidden"},[t._t("default")],2)])},ft=[],mt={name:"BasePanel",props:{title:{type:String,default:"Sat 1"}}},dt=mt,pt=Object(o["a"])(dt,ct,ft,!1,null,"75905614",null),ht=pt.exports,vt={name:"ViewDashboard",components:{RuxButton:J,BasePanel:ht,PanelContacts:ut,PanelAlerts:X},methods:{logOut:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("auth/logOut");case 2:t.$router.replace({name:"Login"});case 3:case"end":return e.stop()}}),e)})))()}}},bt=vt,gt=(r("1971"),Object(o["a"])(bt,C,E,!1,null,"127703f9",null)),xt=gt.exports,wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8"},[r("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[r("base-panel",{attrs:{title:"Register"}},[r("div",{staticClass:"py-8 px-4 sm:px-10"},[r("form",{staticClass:"space-y-6",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[r("rux-input",{attrs:{id:"name",label:"Name","validation-error":t.getError("name")},on:{blur:t.clearErrors},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),r("rux-input",{attrs:{id:"email",label:"Email",type:"email","validation-error":t.getError("email")},on:{blur:t.clearErrors},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),r("rux-input",{attrs:{id:"password",label:"Password",type:"password","validation-error":t.getError("password")},on:{blur:t.clearErrors},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),r("rux-input",{attrs:{id:"password_confirmation",label:"Confirm Password",type:"password","validation-error":t.getError("password_confirmation")},on:{blur:t.clearErrors},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}}),r("div",{staticClass:"flex items-center"},[r("rux-button",{staticClass:"ml-auto mr-4",attrs:{size:"large",outline:!0,type:"button"},nativeOn:{click:function(e){return t.goToLogin(e)}}},[t._v(" Cancel ")]),r("rux-button",{attrs:{size:"large",type:"submit",disabled:t.loading}},[t._v(" Submit ")])],1)],1)])])],1)])},yt=[],_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"rux-form-field"},[r("label",{attrs:{for:t.id}},[t._v(t._s(t.label))]),r("input",{staticClass:"rux-input",class:t.validationError?"invalid":"",attrs:{id:t.id,type:t.type,required:t.validationError,placeholder:t.placeholder},domProps:{value:t.value},on:{blur:function(e){return t.$emit("blur")},input:function(e){return t.$emit("input",e.target.value)}}})]),t.validationError?r("div",{staticClass:"mt-2 ml-4 text-white text-left"},[t._v(" "+t._s(t.validationError)+" ")]):t._e()])},Ct=[],Et={name:"RuxInput",props:{id:{type:String,default:""},label:{type:String,default:""},validationError:{type:String,default:""},value:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""}},computed:{required:function(){return this.validationError}}},Ot=Et,Rt=(r("b4d5"),Object(o["a"])(Ot,_t,Ct,!1,null,"3074e073",null)),St=Rt.exports,Tt={name:"ViewRegister",components:{RuxButton:J,RuxInput:St,BasePanel:ht},data:function(){return{errors:null,loading:!1,form:{name:"",email:"",password:"",password_confirmation:""}}},methods:{clearErrors:function(){this.errors=null},getError:function(t){return this.errors&&this.errors[t]?this.errors[t][0]:null},goToLogin:function(){this.$router.replace({name:"Login"})},submitForm:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,h.post("/register",t.form).then((function(){t.$store.dispatch("auth/fetchUser").then((function(){t.$router.replace({name:"Dashboard"})})).catch((function(){t.$router.replace({name:"Login"})}))})).catch((function(e){e.response&&e.response.data&&e.response.data.errors?t.errors=e.response.data.errors:t.errors=["Error"]})).finally((function(){t.loading=!1}));case 2:case"end":return e.stop()}}),e)})))()}}},kt=Tt,jt=Object(o["a"])(kt,wt,yt,!1,null,"025f3a75",null),Bt=jt.exports,$t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},[r("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[r("base-panel",{attrs:{title:"Login"}},[r("div",{staticClass:"py-8 px-4 shadow sm:rounded-lg sm:px-10"},[r("form",{staticClass:"space-y-6",attrs:{action:"#",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[r("rux-input",{attrs:{id:"email",label:"Email","validation-error":t.getError("email"),type:"email"},on:{blur:t.clearErrors},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),r("rux-input",{attrs:{id:"password",label:"Password",type:"password","validation-error":t.getError("password")},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),r("div",{staticClass:"flex items-center"},[r("rux-button",{staticClass:"ml-auto mr-4 ",attrs:{size:"large",outline:!0,type:"button"},nativeOn:{click:function(e){return t.goToRegister(e)}}},[t._v(" Register ")]),r("rux-button",{attrs:{size:"large",type:"submit"}},[t._v(" Login ")])],1)],1)])])],1)])},At=[],Pt={name:"ViewLogin",components:{RuxButton:J,RuxInput:St,BasePanel:ht},data:function(){return{errors:null,required:null,form:{email:"",password:""}}},methods:{clearErrors:function(){this.errors=null},getError:function(t){return this.errors&&this.errors[t]?this.errors[t][0]:null},goToRegister:function(){this.$router.push("/register")},submitForm:function(){this.logIn(this.form)},logIn:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("auth/logIn",t.form);case 3:return e.next=5,t.$router.replace({name:"Dashboard"});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response&&e.t0.response.data&&e.t0.response.data.errors&&(t.errors=e.t0.response.data.errors);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},Dt=Pt,Ut=Object(o["a"])(Dt,$t,At,!1,null,"255b57f6",null),Lt=Ut.exports,It=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"min-h-screen bg-gray-50 text-center flex flex-col justify-center py-12 sm:px-6 lg:px-8"},[r("div",{staticClass:"text-5xl text-gray-500"},[t._v(" Page Not Found ")])])}],Mt={name:"ViewNotFound"},zt=Mt,Ft=Object(o["a"])(zt,It,Nt,!1,null,"767cefdc",null),qt=Ft.exports;n["a"].use(_["a"]);var Ht=[{path:"*",component:qt},{path:"/",name:"Dashboard",component:xt,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:Bt},{path:"/login",name:"Login",component:Lt}],Vt=new _["a"]({mode:"history",base:"/",routes:Ht});Vt.beforeEach((function(t,e,r){if(t.matched.some((function(t){return t.meta.requiresAuth}))){var n=y.getters["auth/authenticated"];n?r():r({path:"/login"})}else r()}));var Gt=Vt;n["a"].config.productionTip=!1,y.dispatch("auth/fetchUser").then((function(){new n["a"]({router:Gt,store:y,render:function(t){return t(u)}}).$mount("#app")}))},8609:function(t,e,r){},a766:function(t,e,r){},b4d5:function(t,e,r){"use strict";r("2317")},cbfc:function(t,e,r){},df67:function(t,e,r){"use strict";r("3c57")}});
//# sourceMappingURL=app.f8a357f6.js.map